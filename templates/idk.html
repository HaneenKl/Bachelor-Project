<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Semi groups</title>
    <link rel="stylesheet"
          href="{{ url_for('static', filename='assets/bootstrap/css/bootstrap.min.css') }}">


</head>

<body style="background: var(--bs-light);">
<h1 style="text-align: center;font-weight: bold;font-size: 50px;color: var(--bs-dark);">Semi groups</h1>
<div class="row">
    <div class="col">
        <form method="POST" action="/process" class="m-5" style="border-radius: 10px;">

            <input type="hidden" name="mode" id="modeInput" required>
            <input type="hidden" name="space_mode" id="spaceModeInput" value="off">

            <div class="m-5" style="border-radius: 10px;">
                <div class="dropdown" data-bs-toggle="tooltip" data-bss-tooltip="">
                    <button class="btn btn-primary dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown"
                            id="selectMenuButton" type="button" style="background: var(--bs-green);font-weight: bold;">
                        choose input type
                    </button>
                    <div class="dropdown-menu" id="selectMenu" style="background: var(--bs-success-bg-subtle);"><a
                            class="dropdown-item" data-bs-toggle="tooltip" data-bss-tooltip="" id="arden" href="#"
                            onclick="setMode('arden','arden expression')">arden
                        expression</a><a class="dropdown-item" data-bs-toggle="tooltip" data-bss-tooltip="" id="regex"
                                         href="#" onclick="setMode('regex','regular expression')">regular expression</a>
                    </div>
                </div>
                <textarea id="input_field"
                          name="user_input"
                          class="form-control"
                          rows="5"
                          placeholder="enter input ..." style="border-radius: 5px;border-width: 1px;">{{ user_input | default('') }}</textarea>
                <div class="form-check">
                    <div class="form-check" id="spaceModeWrapper">
                        <input class="form-check-input" type="checkbox" id="checkBox" onchange="toggleSpaceMode(this)"
                               {% if space_mode==
                        "on" %}checked{% endif %}><label
                            class="form-check-label"
                            for="checkBox">t<span
                            style="color: rgb(0, 0, 0);">reat each letter as a symbol</span>
                    </label>
                    </div>
                </div>

                <button class="btn btn-primary" data-bs-toggle="tooltip" data-bss-tooltip="" id="computeButton"
                        type="submit" disabled
                        style="margin: 25px;margin-right: 0px;margin-left: 0px;background: var(--bs-green);font-weight: bold;">
                    compute
                </button>
            </div>
        </form>
    </div>
    <div class="col" style="position: relative;margin: initial;">
        <p style="margin: 50px;text-align: center;margin-bottom: 0;font-weight: bold;font-size: 18px;"><span
                style="color: rgb(8, 8, 8); background-color: rgb(255, 255, 255);">arden equation input format:</span>
        </p>
        <p style="margin: 0;text-align: center;"><span
                style="color: rgb(8, 8, 8); background-color: rgb(255, 255, 255);">A = aA + bB + ε</span><br><span
                style="color: rgb(8, 8, 8); background-color: rgb(255, 255, 255);">B = aA + bB + b</span></p>
        <p style="margin: 0;text-align: center;"><span
                style="color: rgb(8, 8, 8); background-color: rgb(255, 255, 255);">One equation per line. Use "ε" or "epsilon" for the empty word.</span>
        </p>
    </div>
</div>
<div class="col {% if not svg %}invisible{% endif %}" id="eggBoxCol">
    <div class="card">
        <div class="card-body" id="eggBoxCard">
            <h4 class="card-title" style="text-align: center;">EggBox-Diagram</h4>
            {% if svg %}
            {{ svg | safe }}
            {% endif %}
        </div>
    </div>
</div>
<div class="container">
    <div class="row {% if not left_svg or not right_svg %}invisible{% endif %}" id="cayleyRow">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body" id="leftCayleyCard">
                    <h4 class="card-title" style="text-align: center;">Left Cayley Grpah</h4>
                    {% if left_svg %}
                    {{ left_svg | safe }}
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body" id="rightCayleyCard">
                    <h4 class="card-title" style="text-align: center;">Right Cayley Grpah</h4>
                    {% if right_svg %}
                    {{ right_svg | safe }}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col {% if not svg %}invisible{% endif %}" id="equationCol">
    <p style="margin: 50px;margin-bottom: 0;">check if an equation holds</p>
    <form method="POST" action="/process">

        <input type="hidden" name="mode" value="{{ request.form.mode }}">
        <input type="hidden" name="user_input" value="{{ user_input }}">
        <input type="hidden" name="processed_input" value="{{ processed_input }}">
        <input type="hidden" name="space_mode" value="{{ space_mode }}">
        <input type="text" id="equationInput" name="equation"
               value="{{ equation or '' }}"
               style="margin: 50px;margin-top: 5px;margin-right: 25px;margin-bottom: 25px;"
               placeholder="e.g. x^3 y z^2 = z y x^3">
        <button class="btn btn-primary" id="checkButton" type="submit"
                style="background: var(--bs-green);font-weight: bold;">check
        </button>
    </form>
    {% if equation_result %}
    <div class="card">
        <div class="card-body" id="equationCheckCard">
            <pre class="mb-0">{{ equation_result }}</pre>
        </div>
    </div>
    {% endif %}
</div>

<script>
    function setMode(value, label) {
        document.getElementById("modeInput").value = value;
        document.getElementById("selectMenuButton").textContent = label;
        document.getElementById("computeButton").disabled = false;

        const spaceWrapper = document.getElementById("spaceModeWrapper");

        if (value === "arden") {
            spaceWrapper.style.display = "none";
            document.getElementById("spaceModeInput").value = "off";
            document.getElementById("checkBox").checked = false;
        } else {
            spaceWrapper.style.display = "block";
        }
    }
</script>

<script>
    function toggleSpaceMode(cb) {
        document.getElementById("spaceModeInput").value =
            cb.checked ? "on" : "off";
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const cb = document.getElementById("checkBox");
        const hidden = document.getElementById("spaceModeInput");
        hidden.value = cb.checked ? "on" : "off";
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const savedMode = "{{ request.form.mode | default('') }}";
        const spaceWrapper = document.getElementById("spaceModeWrapper");

        if (savedMode) {
            if (savedMode === "arden") {
                setMode("arden", "arden expression");
                spaceWrapper.style.display = "none";
            } else if (savedMode === "regex") {
                setMode("regex", "regular expression");
            }
        }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='assets/js/bs-init.js') }}"></script>
</body>
</html>
